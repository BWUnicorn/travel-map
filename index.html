<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æˆ‘çš„æ—…è¡Œåœ°å›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
    <style>
body {
    margin: 0;
    font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    background: linear-gradient(135deg, #1e1f2f, #2a2d4a);
    color: white;
    overflow: hidden;
}

/* åœ°å›¾å®¹å™¨ */
#main {
    width: 100%;
    height: 100vh;
}

/* é¡¶éƒ¨æ ‡é¢˜ */
.header {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 26px;
    font-weight: 600;
    letter-spacing: 2px;
}

/* é‡ç½®æŒ‰é’® */
button {
    position: absolute;
    top: 20px;
    right: 30px;
    z-index: 1000;
    padding: 8px 16px;
    border: none;
    border-radius: 20px;
    background: linear-gradient(45deg, #ff7e5f, #feb47b);
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    transform: scale(1.05);
}
</style>
</head>
<body>

    <button onclick="resetMap()" style="
position:absolute;
top:20px;
right:20px;
z-index:1000;
padding:8px 12px;
cursor:pointer;
">
é‡ç½®åœ°å›¾
</button>

<div class="header">
    ğŸŒ æˆ‘çš„ 2026 æ—…è¡Œåœ°å›¾
</div>

<div id="main"></div>

<script>
// 1ï¸âƒ£ è·å–é¡µé¢ä¸­ id="main" çš„ divï¼Œç”¨æ¥æ”¾åœ°å›¾
var chart = echarts.init(document.getElementById('main'));

// 2ï¸âƒ£ ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨â€œå·²ç»å»è¿‡çš„çœä»½â€
// æ¯ä¸ªå…ƒç´ æ ¼å¼æ˜¯ï¼š{ name: 'æµ™æ±Ÿ', value: 1 }
// 1ï¸âƒ£ å°è¯•ä»æµè§ˆå™¨æœ¬åœ°è¯»å–ä¹‹å‰ä¿å­˜çš„æ•°æ®
var savedData = localStorage.getItem("travelData");

// 2ï¸âƒ£ å¦‚æœæœ‰æ•°æ®ï¼Œå°±è§£ææˆæ•°ç»„
// å¦‚æœæ²¡æœ‰ï¼Œå°±ç”¨ç©ºæ•°ç»„
var visited = savedData ? JSON.parse(savedData) : [];
function renderMap() {

    // åœ°å›¾çš„é…ç½®é¡¹
    var option = {
        title: {
            text: 'æˆ‘çš„æ—…è¡Œåœ°å›¾',   // æ ‡é¢˜æ–‡å­—
            left: 'center'         // æ ‡é¢˜å±…ä¸­
        },

        tooltip: {},  // é¼ æ ‡æ‚¬æµ®æç¤º

        // é¢œè‰²æ§åˆ¶å™¨ï¼ˆæ ¹æ® value å€¼æ§åˆ¶é¢œè‰²ï¼‰
        visualMap: {
            inRange: {
    color: ['#3a3f7a', '#ffd700']
},
            min: 0,
            max: 1,
            left: 'left',
            top: 'bottom',
            text: ['å·²å»','æœªå»'],   // å·¦å³æ˜¾ç¤ºæ–‡å­—
            calculable: false
        },

        // åœ°å›¾ä¸»ä½“
        series: [{
            name: 'ä¸­å›½',
            type: 'map',          // ç±»å‹ï¼šåœ°å›¾
            map: 'china',         // ä½¿ç”¨ä¸­å›½åœ°å›¾
            data: visited         // ç”¨æˆ‘ä»¬å­˜å‚¨çš„æ•°ç»„ä½œä¸ºæ•°æ®
        }]
    };

    // æŠŠé…ç½®åº”ç”¨åˆ°åœ°å›¾ä¸Š
    chart.setOption(option);
}

// 4ï¸âƒ£ é¡µé¢ä¸€åŠ è½½å°±å…ˆç”»ä¸€æ¬¡åœ°å›¾
renderMap();

// é‡ç½®åœ°å›¾å‡½æ•°
function resetMap() {

    // å¼¹å‡ºç¡®è®¤æç¤º
    var confirmReset = confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ—…è¡Œè®°å½•å—ï¼Ÿ");

    if (confirmReset) {

        // æ¸…ç©ºæ•°ç»„
        visited = [];

        // æ¸…ç©ºæµè§ˆå™¨å­˜å‚¨
        localStorage.removeItem("travelData");

        // é‡æ–°æ¸²æŸ“åœ°å›¾
        renderMap();
    }
}

// 5ï¸âƒ£ ç›‘å¬â€œç‚¹å‡»åœ°å›¾â€çš„äº‹ä»¶
chart.on('click', function(params) {

    // params.name å°±æ˜¯ä½ ç‚¹å‡»çš„çœä»½åå­—
    var province = params.name;

    // æ£€æŸ¥è¿™ä¸ªçœä»½æ˜¯å¦å·²ç»åœ¨ visited é‡Œ
    var exists = visited.find(function(item) {
        return item.name === province;
    });

    // å¦‚æœæ²¡æœ‰å»è¿‡ï¼Œå°±æ·»åŠ è¿›å»
    if (!exists) {
        visited.push({
            name: province,
            value: 1
        });
    }

    // 3ï¸âƒ£ æ¯æ¬¡ä¿®æ”¹åï¼ŒæŠŠæ•°æ®å­˜åˆ°æµè§ˆå™¨æœ¬åœ°
localStorage.setItem("travelData", JSON.stringify(visited));

    // é‡æ–°æ¸²æŸ“åœ°å›¾ï¼ˆåˆ·æ–°é¢œè‰²ï¼‰
    renderMap();
});
</script>

</body>
</html>